{% load i18n %}
{% load humanize %}

	<div class="tab-content container">
	    <section id="ha">
	        <div class="row">
	            <div class="breadcrumb breadcrumb-custom">
	            	<span>{% trans "Humanitarian Access" %}</span>
	            	{% include "v2/breadcrumb.html" %}
	            	<div class="pull-right">
	            	  <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 0px 10px; border: 0px">
	            	    <i class="fa fa-calendar"></i>&nbsp; {% trans "Incident between" %} :
	            	    <span></span> <b class="caret hidden-print"></b>
	            	  </div>
	            	</div>
	            </div>
	        </div>
	        <div class="row hidden-print">
	            <div class="col-md-12 col-sm-12 col-xs-12">
	                <div class="x_panel">
	                    <div class="x_title">
	                        <h2 class="pull-left">{% trans "Map of Incidents Occurrence" %}</h2>
	                        <ul class="nav navbar-right panel_toolbox">
	                            <li class="hidden">
	                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	                            </li>
	                            <li class="hidden">
	                                <a class="close-link"><i class="fa fa-close"></i></a>
	                            </li>
	                            <li>
	                                <a href="http://asdc.immap.org/maps/656/view" class="btn btn-primary" target="_blank">Visit Interactive Maps</a>
	                            </li>
	                        </ul>
	                        <div class="clearfix"></div>
	                    </div>
	                    <div class="x_content">
	                    	<div class="row">
	                    		<div class="col-md-3 col-sm-12 col-xs-12">
	                    			<div id="layercontrol">
	                    				<label for="haccessOpt">Choose Layer :</label>
	                    			    <select id="haccessOpt" class="form-control">
	                    			      <option value="total_incident">Total Incidents</option>
	                    			      <option value="total_violent">Violent Incidents</option>
	                    			      <option value="total_injured">Injured Casualties</option>
	                    			      <option value="total_dead">Dead Casualties</option>
	                    			    </select>

	                    			    <label for="slideRange">Range :</label>
	                    			    <div id="slideRange">
	                    			        <div id="keypress"></div>
	                    			        <br>
	                    			        <div class="row form-group">
	                    			            <div class="col-md-6 col-xs-6">
	                    			                <input type="text" id="input-with-keypress-0" class="form-control">
	                    			            </div>
	                    			            <div class="col-md-6 col-xs-6">
	                    			                <input type="text" id="input-with-keypress-1" class="form-control">
	                    			            </div>
	                    			        </div>
	                    			    </div>

	                    			    <label for="themes">Pick a theme :</label>
	                    			    <div id="themes">
	                    			        <button class="theme active" data-btn="YlOrRd"></button>
	                    			        <button class="theme" data-btn="PuRd"></button>
	                    			        <button class="theme" data-btn="GnBu"></button>
	                    			        <button class="theme" data-btn="Blues"></button>
	                    			        <button class="theme" data-btn="BuGn"></button>
	                    			        <button class="theme" data-btn="BuPu"></button>
	                    			        <button class="theme" data-btn="Greens"></button>
	                    			        <button class="theme" data-btn="Greys"></button>
	                    			        <button class="theme" data-btn="Oranges"></button>
	                    			        <button class="theme" data-btn="OrRd"></button>
	                    			        <button class="theme" data-btn="PuBu"></button>
	                    			        <button class="theme" data-btn="PuBuGn"></button>
	                    			        <button class="theme" data-btn="Purples"></button>
	                    			        <button class="theme" data-btn="RdPu"></button>
	                    			        <button class="theme" data-btn="Reds"></button>
	                    			        <button class="theme" data-btn="YlGn"></button>
	                    			        <button class="theme" data-btn="YlGnBu"></button>
	                    			        <button class="theme" data-btn="YlOrBr"></button>
	                    			    </div>
	                    			</div>
	                    		</div>
	                    		<div class="col-md-9 col-sm-12 col-xs-12">
	                    		    <div id="leaflet_haccess_map" class="ch-size-map"></div>
	                    		</div>
	                    		<div class="col-md-12 col-sm-12 col-xs-12">
	                    		    <div id="mapInfo"></div>
	                    		</div>
	                    	</div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <div class="row">
	        	<div class="col-md-12 col-sm-12 col-xs-12">
	              <div class="x_panel">
	                <div class="x_title">
	                	<h2 class="pull-left">{% trans 'Graph of Incident and Casualties Trend by Incident Type' %}</h2>
	                  <ul class="nav navbar-right panel_toolbox hidden">
	                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	                    </li>
	                    <li><a class="close-link"><i class="fa fa-close"></i></a>
	                    </li>
	                  </ul>
	                  <div class="clearfix"></div>
	                </div>
	                <div class="x_content">
	                    <div class="col-md-8">
	                        <div id="echart_polar_incident_type" style="height:420px;"></div>
	                    </div>
	                    <div class="col-md-4">
	                    	<div class="panel panel-default checkbox-group">
	                    	    <div class="panel-heading parents-checkbox">
	                    	    	<span>{% trans 'Select Incident Type' %}</span>
	                    	    	<div class="pull-right">
		                    	    	<form class="form-inline">
		                    	    		<div class="checkbox checkbox-white">
		                    	    			<label class="panel-select-all">
		                    	    			     <input type="checkbox" id="selecctall1" class="styled" checked=""/>&nbsp;{% trans 'Select All' %}
		                    	    			</label>
		                    	    		</div>
		                    	    		<button class="btn btn-xs btn-default hidden-print ply-trget">{% trans "Apply" %}</button>
		                    	    	</form>
	                    	    	</div>
	                    	    </div>
	                    	    <div id="indicatorType" class="panel-body child-checkbox">
	                    	    	<!-- <div class="col-md-6 col-xs-6 col-sm-6"> -->
	                    	    	{% get_current_language_bidi as LANGUAGE_BIDI %}
	                    	    		{% for item in main_type_child %}
	                    	    		<div class="checkbox checkbox-red {{ LANGUAGE_BIDI | yesno:'rtl, ltr' }}">
	                    	    			<label>
	                    	    				<input id="type{{ forloop.counter0 }}" name="main_type_select[]" type="checkbox" class="checkIncident" value="{{ item.main_type }}" {% if item.main_type in incident_type %}checked=true{% endif %}>
	                    	    				 {{ item.main_type }} ({{item.count}} incidents)
	                    	    			</label>
	                    	    			<!-- <label>
	                    	    				<input type="checkbox" class="checkIncident styled" value="Military/Non-Military Operation" checked="">
	                    	    				 Military/Non-Military Operation
	                    	    			</label> -->
	                    	    		</div>
	                    	    		{% endfor %}
	                    	    		<!-- <div class="checkbox checkbox-red">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident styled" value="Attack" checked="" />Attack
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Kidnapping" checked="" />Kidnapping
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Weapons" checked="" />Weapons
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Murder" checked="" />Murder
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Abandonment" checked="" />Abandonment
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Small Arms Fire" checked="" />Small Arms Fire
	                    	    			</label>
	                    	    		</div> -->
	                    	    	<!-- </div> -->
	                    	    	<!-- <div class="col-md-6 col-xs-6 col-sm-6">
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Civilian Accident" checked="" />Civilian Accident
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Demonstration" checked="" />Demonstration
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="IED" checked="" />IED
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Arrest" checked="" />Arrest
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="Others" checked="" />Others
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkIncident" value="UXO" checked="" />UXO
	                    	    			</label>
	                    	    		</div>
	                    	    	</div> -->
	                    	    </div>
	                    	</div>
	                    </div>
	                </div>
	              </div>
	            </div>
	        	<div class="col-md-6 col-sm-12 col-xs-12">
	        	    <div class="x_panel">
	        	        <div class="x_title">
	        	            <h2 class="pull-left">{% trans "Incidents and Casualties by Incident Type" %}</h2>
	        	            <ul class="nav navbar-right panel_toolbox hidden">
	        	                <li>
	        	                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	        	                </li>
	        	                <li>
	        	                    <a class="close-link"><i class="fa fa-close"></i></a>
	        	                </li>
	        	            </ul>
	        	            <div class="clearfix"></div>
	        	        </div>
	        	        <div class="x_content">
	        	            <p class="text-muted font-13 m-b-30">{% trans "List of Incidents and Casualties grouped by Incident Type. The data is updated each working day." %}</p>
	        	          	<div class="table-responsive hidden-print">
	        	          		<table id="" class=" table table-striped table-bordered table-condensed online_security">
	        	          			<thead>
	        	          				<tr>
	        	          					<th rowspan="2">{% trans "Incident Type" %}</th>
	        	          					<th colspan="2">{% trans "Incidents" %}</th>
	        	          					<th colspan="2">{% trans "Casualties" %}</th>
	        	          				</tr>
	        	          				<tr>
	        	          					<th class="hum">{% trans "Total" %}</th>
	        	          					<th class="hum">{% trans "Violent" %}</th>
	        	          					<th class="hum">{% trans "Injured" %}</th>
	        	          					<th class="hum">{% trans "Dead" %}</th>
	        	          				</tr>
	        	          			</thead>
	        	          			<tbody>
	        	          				{% for data in incident_type_group %}
        	          				    <tr>
        	          				        <td class="boldRow">{{ data.main_type }}</td>
        	          				        <td class="boldRow">{{ data.count }}</td>
        	          				        <td class="boldRow">{{ data.violent }}</td>
        	          				        <td class="boldRow">{{ data.injured }}</td>
        	          				        <td class="boldRow">{{ data.dead }}</td>
        	          				    </tr>
	        	          				    {% for item in data.child %}
        	          				        <tr>
        	          				            <td>{{ item.type }}</td>
        	          				            <td>{{ item.count }}</td>
        	          				            <td>{{ item.violent }}</td>
        	          				            <td>{{ item.injured }}</td>
        	          				            <td>{{ item.dead }}</td>
        	          				        </tr>
	        	          				    {% endfor %}
	        	          				{% endfor %}
	        	          			</tbody>
	        	          		</table>
	        	          	</div>
	        	          	<div class="table-responsive visible-print-block">
	        	          		<table id="" class=" table table-striped table-bordered table-condensed print">
	        	          			<thead>
	        	          				<tr>
	        	          					<th rowspan="2">{% trans "Incident Type" %}</th>
	        	          					<th colspan="2">{% trans "Incidents" %}</th>
	        	          					<th colspan="2">{% trans "Casualties" %}</th>
	        	          				</tr>
	        	          				<tr>
	        	          					<th class="hum">{% trans "Total" %}</th>
	        	          					<th class="hum">{% trans "Violent" %}</th>
	        	          					<th class="hum">{% trans "Injured" %}</th>
	        	          					<th class="hum">{% trans "Dead" %}</th>
	        	          				</tr>
	        	          			</thead>
	        	          			<tbody>
	        	          				{% for data in incident_type_group %}
        	          				    <tr>
        	          				        <td class="boldRow">{{ data.main_type }}</td>
        	          				        <td class="boldRow">{{ data.count }}</td>
        	          				        <td class="boldRow">{{ data.violent }}</td>
        	          				        <td class="boldRow">{{ data.injured }}</td>
        	          				        <td class="boldRow">{{ data.dead }}</td>
        	          				    </tr>
	        	          				    {% for item in data.child %}
        	          				        <tr>
        	          				            <td>{{ item.type }}</td>
        	          				            <td>{{ item.count }}</td>
        	          				            <td>{{ item.violent }}</td>
        	          				            <td>{{ item.injured }}</td>
        	          				            <td>{{ item.dead }}</td>
        	          				        </tr>
	        	          				    {% endfor %}
	        	          				{% endfor %}
	        	          			</tbody>
	        	          		</table>
	        	          	</div>
	        	        </div>
	        	    </div>
	        	</div>
	        	<div class="col-md-6 col-sm-12 col-xs-12">
		        	<div class="">
		        	  <div class="x_panel">
		        	    <div class="x_title">
		        	        <h2 class="pull-left">{% trans "Number of Casualties by Incident Type" %}</h2>
			        	    <ul class="nav navbar-right panel_toolbox hidden">
			        	        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
			        	        </li>
			        	        <li><a class="close-link"><i class="fa fa-close"></i></a>
			        	        </li>
			        	    </ul>
		        	      <div class="clearfix"></div>
		        	    </div>
		        	    <div class="x_content">
		        	        <div id="echart_bar_horizontal_casualty_incident" class="ch-size-haccessBar" style="height:480px;"></div>
		        	    </div>
		        	  </div>
		        	</div>
		        	<div class="">
		        	  <div class="x_panel">
		        	    <div class="x_title">
	        	          	<h2 class="pull-left">{% trans "Number of Incidents by Incident Type" %}</h2>
			        	    <ul class="nav navbar-right panel_toolbox hidden">
			        	        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
			        	        </li>
			        	        <li><a class="close-link"><i class="fa fa-close"></i></a>
			        	        </li>
			        	    </ul>
			        	    <div class="clearfix"></div>
		        	    </div>
		        	    <div class="x_content">
		        	        <div id="echart_bar_horizontal_incident_incident" class="ch-size-haccessBar" style="height:480px;"></div>
		        	    </div>
		        	  </div>
		        	</div>
	        	</div>
	        </div>
	        <div class="row">
	            <div class="col-md-12 col-sm-12 col-xs-12">
	              <div class="x_panel">
	                <div class="x_title">
                      <h2 class="pull-left">{% trans 'Graph of Incident and Casualties Trend by Target Type' %}</h2>
	                  <ul class="nav navbar-right panel_toolbox hidden">
	                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	                    </li>
	                    <li><a class="close-link"><i class="fa fa-close"></i></a>
	                    </li>
	                  </ul>
	                  <div class="clearfix"></div>
	                </div>
	                <div class="x_content">
	                    <div class="col-md-8">
	                        <div id="echart_polar_target_type" style="height:420px;"></div>
	                    </div>
	                    <div class="col-md-4">
	                    	<div class="panel panel-default checkbox-group">
	                    	    <div class="panel-heading parents-checkbox">
	                    	    	<span>
	                    	    		{% trans ' Select Incident Target' %}
	                    	    	</span>
	                    	    	<div class="pull-right">
	                    	    		<form class="form-inline">
	                    	    			<div class="checkbox checkbox-white">
	                    	    				<label class="panel-select-all">
	                    	    				     <input type="checkbox" id="selecctall2" checked=""/>&nbsp;{% trans "Select All" %}
	                    	    				</label>
	                    	    			</div>
	                    	    			<button type="button" class="btn btn-xs btn-default hidden-print  ply-trget">{% trans 'Apply' %}</button>
	                    	    		</form>
	                    	    	</div>
	                    	    </div>
	                    	    <div id="indicatorTarget" class="panel-body child-checkbox">
	                    	    	<!-- <div class="col-md-6 col-xs-6 col-sm-6"> -->
	                    	    		{% for item in main_target_child %}
	                    	    		<div class="checkbox checkbox-red {{ LANGUAGE_BIDI | yesno:'rtl, ltr' }}">
	                    	    			<label>
	                    	    				<input id="target{{ forloop.counter0 }}" name="main_target_select[]" type="checkbox" class="checkTarget" value="{{ item.main_target }}" {% if item.main_target in incident_target %}checked=true{% endif %} /> {{ item.main_target }} ({{item.count}} incidents)
	                    	    			</label>
	                    	    			<!-- <label>
	                    	    				<input type="checkbox" class="checkTarget" value="Armed Opposition Group" checked="" />Armed Opposition Group
	                    	    			</label> -->
	                    	    		</div>
	                    	    		{% endfor %}
	                    	    		<!-- <div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Government" checked="" />Government
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Unknown" checked="" />Unknown
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Intl. Military" checked="" />Intl. Military
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Humanitarian Cmty." checked="" />Humanitarian Cmty.
	                    	    			</label>
	                    	    		</div> -->
	                    	    	<!-- </div> -->
	                    	    	<!-- <div class="col-md-6 col-xs-6 col-sm-6">
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Intl. Humanitarian Cmty." checked="" />Intl. Humanitarian Cmty.
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Infrastructure" checked="" />Infrastructure
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Civilians" checked="" />Civilians
	                    	    			</label>
	                    	    		</div>
	                    	    		<div class="checkbox">
	                    	    			<label>
	                    	    				<input type="checkbox" class="checkTarget" value="Police/ Mill. Gov." checked="" />Police/ Military Gov.
	                    	    			</label>
	                    	    		</div>

	                    	    	</div> -->
	                    	    </div>
	                    	</div>
	                    </div>
	                </div>
	              </div>
	            </div>
	            <div class="col-md-6 col-sm-12 col-xs-12">
	                <div class="x_panel">
	                    <div class="x_title">
	                        <h2 class="pull-left">{% trans "Incidents and Casualties by Target Type" %}</h2>
	                        <ul class="nav navbar-right panel_toolbox hidden">
	                            <li>
	                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	                            </li>
	                            <li>
	                                <a class="close-link"><i class="fa fa-close"></i></a>
	                            </li>
	                        </ul>
	                        <div class="clearfix"></div>
	                    </div>
	                    <div class="x_content">
	                        <p class="text-muted font-13 m-b-30">{% trans "List of Incidents and Casualties grouped by Target Type. The data is updated each working day." %}</p>
	                      	<div class="table-responsive hidden-print">
	        	          		<table id="" class=" table table-striped table-bordered table-condensed online_security">
	        	          			<thead>
	        	          				<tr>
	        	          					<th rowspan="2">{% trans "Incident Type" %}</th>
	        	          					<th colspan="2">{% trans "Incidents" %}</th>
	        	          					<th colspan="2">{% trans "Casualties" %}</th>
	        	          				</tr>
	        	          				<tr>
	        	          					<th class="hum">{% trans "Total" %}</th>
	        	          					<th class="hum">{% trans "Violent" %}</th>
	        	          					<th class="hum">{% trans "Injured" %}</th>
	        	          					<th class="hum">{% trans "Dead" %}</th>
	        	          				</tr>
	        	          			</thead>
	        	          			<tbody>
	        	          				{% for data in incident_target_group %}
        	          				    <tr>
        	          				        <td class="boldRow">{{ data.main_target }}</td>
        	          				        <td class="boldRow">{{ data.count }}</td>
        	          				        <td class="boldRow">{{ data.violent }}</td>
        	          				        <td class="boldRow">{{ data.injured }}</td>
        	          				        <td class="boldRow">{{ data.dead }}</td>
        	          				    </tr>
	        	          				    {% for item in data.child %}
        	          				        <tr>
        	          				            <td>{{ item.target }}</td>
        	          				            <td>{{ item.count }}</td>
        	          				            <td>{{ item.violent }}</td>
        	          				            <td>{{ item.injured }}</td>
        	          				            <td>{{ item.dead }}</td>
        	          				        </tr>
	        	          				    {% endfor %}
	        	          				{% endfor %}
	        	          			</tbody>
	        	          		</table>
	                      	</div>
	                      	<div class="table-responsive visible-print-block">
	        	          		<table id="" class=" table table-striped table-bordered table-condensed print">
	        	          			<thead>
	        	          				<tr>
	        	          					<th rowspan="2">{% trans "Incident Type" %}</th>
	        	          					<th colspan="2">{% trans "Incidents" %}</th>
	        	          					<th colspan="2">{% trans "Casualties" %}</th>
	        	          				</tr>
	        	          				<tr>
	        	          					<th class="hum">{% trans "Total" %}</th>
	        	          					<th class="hum">{% trans "Violent" %}</th>
	        	          					<th class="hum">{% trans "Injured" %}</th>
	        	          					<th class="hum">{% trans "Dead" %}</th>
	        	          				</tr>
	        	          			</thead>
	        	          			<tbody>
	        	          				{% for data in incident_target_group %}
        	          				    <tr>
        	          				        <td class="boldRow">{{ data.main_target }}</td>
        	          				        <td class="boldRow">{{ data.count }}</td>
        	          				        <td class="boldRow">{{ data.violent }}</td>
        	          				        <td class="boldRow">{{ data.injured }}</td>
        	          				        <td class="boldRow">{{ data.dead }}</td>
        	          				    </tr>
	        	          				    {% for item in data.child %}
        	          				        <tr>
        	          				            <td>{{ item.target }}</td>
        	          				            <td>{{ item.count }}</td>
        	          				            <td>{{ item.violent }}</td>
        	          				            <td>{{ item.injured }}</td>
        	          				            <td>{{ item.dead }}</td>
        	          				        </tr>
	        	          				    {% endfor %}
	        	          				{% endfor %}
	        	          			</tbody>
	        	          		</table>
	                      	</div>
	                    </div>
	                </div>
	            </div>
	            <div class="col-md-6 col-sm-12 col-xs-12">
	            	<div class="">
						<div class="x_panel">
							<div class="x_title">
								<h2 class="pull-left">{% trans "Number of Casualties by Target Type" %}</h2>
								<ul class="nav navbar-right panel_toolbox hidden">
									<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
									</li>
									<li><a class="close-link"><i class="fa fa-close"></i></a>
									</li>
								</ul>
								<div class="clearfix"></div>
							</div>
							<div class="x_content">
								<div id="echart_bar_horizontal_casualty_target" class="ch-size-haccessBar" style="height:370px;"></div>
							</div>
						</div>
					</div>
					<div class="">
						<div class="x_panel">
							<div class="x_title">
								<h2 class="pull-left">{% trans "Number of Incidents by Target Type" %}</h2>
								<ul class="nav navbar-right panel_toolbox hidden">
									<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
									</li>
									<li><a class="close-link"><i class="fa fa-close"></i></a>
									</li>
								</ul>
								<div class="clearfix"></div>
							</div>
							<div class="x_content">
								<div id="echart_bar_horizontal_incident_target" class="ch-size-haccessBar" style="height:370px;"></div>
							</div>
						</div>
	            	</div>
	            </div>
	        </div>
	        <div class="row">
	        	<div class="col-md-5 col-sm-12 col-xs-12">
	        	    <div class="x_panel">
	        	        <div class="x_title">
	        	            <h2 class="pull-left">{% trans "Number of Incident and Casualties Overview" %}</h2>
	        	            <ul class="nav navbar-right panel_toolbox hidden">
	        	                <li>
	        	                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	        	                </li>
	        	                <li>
	        	                    <a class="close-link"><i class="fa fa-close"></i></a>
	        	                </li>
	        	            </ul>
	        	            <div class="clearfix"></div>
	        	        </div>
	        	        <div class="x_content">
	        	            <p class="text-muted font-13 m-b-30">{% trans "Summary of Incidents and Casualties occured in Afghanistan. The data is updated each working day." %}</p>
	        	          	<div class="table-responsive hidden-print">
	        	          		<table id="" class="table table-striped table-bordered online">
	        	          			<thead>
	        	          				<tr>
	        	          					<th rowspan="2">{% trans "Region" %}</th>
	        	          					<th colspan="2">{% trans "Incidents" %}</th>
	        	          					<th colspan="2">{% trans "Casualties" %}</th>
	        	          				</tr>
	        	          				<tr>
	        	          					<th class="hum">{% trans "Total" %}</th>
	        	          					<th class="hum">{% trans "Violent" %}</th>
	        	          					<th class="hum">{% trans "Injured" %}</th>
	        	          					<th class="hum">{% trans "Dead" %}</th>
	        	          				</tr>
	        	          			</thead>
	        	          			<tbody>
	        	          				<tr>
	        	          					<td class="boldRow">{{parent_label}}</td>
	        	          					<td class="boldRow hum">{{total_incident}}</td>
	        	          					<td class="boldRow hum">{{total_violent}}</td>
	        	          					<td class="boldRow hum">{{total_injured}}</td>
	        	          					<td class="boldRow hum">{{total_dead}}</td>
	        	          				</tr>
	        	          				{% for data in lc_child %}
	        	          				<tr class="selectable" onclick="jump_url({{data.code}});">
	        	          					<td>{{data.na_en}}</td>
	        	          					<td>{{data.total_incident}}</td>
	        	          					<td>{{data.total_violent}}</td>
	        	          					<td>{{data.total_injured}}</td>
	        	          					<td>{{data.total_dead}}</td>
	        	          				</tr>
	        	          				{% endfor %}
	        	          			</tbody>
	        	          		</table>
	        	          	</div>
	        	          	<div class="table-responsive visible-print-block">
	        	          		<table id="" class="table table-striped table-bordered print">
	        	          			<thead>
	        	          				<tr>
	        	          					<th rowspan="2">{% trans "Region" %}</th>
	        	          					<th colspan="2">{% trans "Incidents" %}</th>
	        	          					<th colspan="2">{% trans "Casualties" %}</th>
	        	          				</tr>
	        	          				<tr>
	        	          					<th class="hum">{% trans "Total" %}</th>
	        	          					<th class="hum">{% trans "Violent" %}</th>
	        	          					<th class="hum">{% trans "Injured" %}</th>
	        	          					<th class="hum">{% trans "Dead" %}</th>
	        	          				</tr>
	        	          			</thead>
	        	          			<tbody>
	        	          				<tr>
	        	          					<td class="boldRow">{{parent_label}}</td>
	        	          					<td class="boldRow hum">{{total_incident}}</td>
	        	          					<td class="boldRow hum">{{total_violent}}</td>
	        	          					<td class="boldRow hum">{{total_injured}}</td>
	        	          					<td class="boldRow hum">{{total_dead}}</td>
	        	          				</tr>
	        	          				{% for data in lc_child %}
	        	          				<tr class="selectable" onclick="jump_url({{data.code}});">
	        	          					<td>{{data.na_en}}</td>
	        	          					<td>{{data.total_incident}}</td>
	        	          					<td>{{data.total_violent}}</td>
	        	          					<td>{{data.total_injured}}</td>
	        	          					<td>{{data.total_dead}}</td>
	        	          				</tr>
	        	          				{% endfor %}
	        	          			</tbody>
	        	          		</table>
	        	          	</div>
	        	        </div>
	        	    </div>
	        	</div>
	            <div class="col-md-7 col-sm-12 col-xs-12">
	                <div class="x_panel">
	                    <div class="x_title">
	                        <h2 class="pull-left">{% trans "List of Latest Incidents" %}</h2>
	                        <ul class="nav navbar-right panel_toolbox hidden">
	                            <li>
	                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
	                            </li>
	                            <li>
	                                <a class="close-link"><i class="fa fa-close"></i></a>
	                            </li>
	                        </ul>
	                        <div class="clearfix"></div>
	                    </div>
	                    <div class="x_content">
	                        <p class="text-muted font-13 m-b-30">{% trans 'This table gives the details of the incidents occured in Afghanistan. It is restricted to show 100 latest incidents only.' %}</p>
	                      	<div class="table-responsive hidden-print">
	                      		<table id="" class="table table-striped table-bordered table-condensed list_incident online">
	                      			<thead>
	                      				<tr>
	                      					<th>{% trans "Date" %}</th>
	                      					<th>{% trans "Description" %}</th>
	                      				</tr>
	                      			</thead>
	                      			<tbody>
	                      				{% for item in incident_list_100 %}
                      					<tr>
                      						<td>{{ item.incident_date |date:'M j, Y' }}</td>
                      						<td>{{ item.description }}</td>
                      					</tr>
	                      				{% endfor %}
	                      			</tbody>
	                      		</table>
	                      	</div>
	                      	<div class="table-responsive visible-print-block">
	                      		<table id="" class="table table-striped table-bordered table-condensed list_incident print">
	                      			<thead>
	                      				<tr>
	                      					<th>{% trans "Date" %}</th>
	                      					<th>{% trans "Description" %}</th>
	                      				</tr>
	                      			</thead>
	                      			<tbody>
	                      				{% for item in incident_list_100 %}
                      					<tr>
                      						<td>{{ item.incident_date }}</td>
                      						<td>{{ item.description }}</td>
                      					</tr>
	                      				{% endfor %}
	                      			</tbody>
	                      		</table>
	                      	</div>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </section>
	</div>

<script type="text/javascript">
	var polar_cat = [ '{% trans "Incidents" %}', '{% trans "Dead" %}', '{% trans "Injured" %}',  '{% trans "Violent" %}']
	var bar_cas_cat = ['{% trans "Dead" %}', '{% trans "Injured" %}']
	var bar_inc_cat = ['{% trans "Incident" %}', '{% trans "Violent" %}']
	var incident_cat = [];
	var target_cat = [];

	function checkNull(numb){
        if (numb == null) {
            return 0;
        }else{
            return numb;
        }
    }

	var targetCount = [];
	var targetDead = [];
	var targetInjured = [];
	var targetViolent = [];

	{% for data in incident_target_group %}
		target_cat.push('{{data.main_target}}');
		targetCount.push(checkNull({{data.count}}));
		targetDead.push(checkNull({{data.dead}}));
		targetInjured.push(checkNull({{data.injured}}));
		targetViolent.push(checkNull({{data.violent}}));
	{% endfor %}

	// console.log(targetDead);

	var incidentCount = [];
	var incidentViolent = [];
	var incidentInjured = [];
	var incidentDead = [];

	{% for data in incident_type_group %}
		incident_cat.push('{{data.main_type}}');
		incidentCount.push(checkNull({{data.count}}));
		incidentDead.push(checkNull({{data.dead}}));
		incidentInjured.push(checkNull({{data.injured}}));
		incidentViolent.push(checkNull({{data.violent}}));
	{% endfor %}

	// console.log(incident_cat);

	var chosen_label = '{{parent_label}}';
	var map_category = ['{% trans "Total Incidents" %}', '{% trans "Violence Incidents" %}', '{% trans "Injured" %}', '{% trans "Dead" %}'];
	var boundary = {{GeoJson|safe}};
	var centroid = boundary['centroid'];

	var max_incident = 0;
	var max_violent = 0;
	var max_injured = 0;
	var max_dead = 0;

	// Add additional data to properties in GeoJSON
	for (var i = 0; i < boundary.features.length; i++) {

	    // Checking if it's in a district
	    {% if not additional_child and not lc_child %}
	    	set_jenk_divider = 1;
	        boundary['features'][i]['properties']['na_en']="{{parent_label}}"
	        boundary['features'][i]['properties']['total_incident']={{total_incident}}
	        boundary['features'][i]['properties']['total_violent']={{total_violent}}
	        boundary['features'][i]['properties']['total_injured']={{total_injured}}
	        boundary['features'][i]['properties']['total_dead']={{total_dead}}

	        // Fill the max value of each possible option for the map
	        max_incident_temp = {{total_incident}};
	        max_violent_temp = {{total_violent}}
	        max_injured_temp = {{total_injured}}
	        max_dead_temp = {{total_dead}}

	        if (max_incident < max_incident_temp) {
	          max_incident = max_incident_temp;
	        }

	        if (max_violent < max_violent_temp) {
	          max_violent = max_violent_temp;
	        }

	        if (max_injured < max_injured_temp) {
	          max_injured = max_injured_temp;
	        }

	        if (max_dead < max_dead_temp) {
	          max_dead = max_dead_temp;
	        }

	    {% else %}
	    	set_jenk_divider = 7;
	        {% for data in lc_child %}
	            if (boundary['features'][i]['properties']['code']=={{data.code}}) {
	            	boundary['features'][i]['properties']['na_en']="{{data.na_en}}"
	                boundary['features'][i]['properties']['total_incident']={{data.total_incident}}
	                boundary['features'][i]['properties']['total_violent']={{data.total_violent}}
	                boundary['features'][i]['properties']['total_injured']={{data.total_injured}}
	                boundary['features'][i]['properties']['total_dead']={{data.total_dead}}

	                max_incident_temp = {{data.total_incident}};
	                max_violent_temp = {{data.total_violent}}
	                max_injured_temp = {{data.total_injured}}
	                max_dead_temp = {{data.total_dead}}

	                if (max_incident < max_incident_temp) {
	                  max_incident = max_incident_temp;
	                }

	                if (max_violent < max_violent_temp) {
	                  max_violent = max_violent_temp;
	                }

	                if (max_injured < max_injured_temp) {
	                  max_injured = max_injured_temp;
	                }

	                if (max_dead < max_dead_temp) {
	                  max_dead = max_dead_temp;
	                }
	            }

	        {% endfor %}

	    {% endif %}
	}

	var max_collection = 
	{
	  total_incident : max_incident,
	  total_violent : max_violent,
	  total_injured : max_injured,
	  total_dead : max_dead
	}

</script>

	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function(){

			// Select All/None
			    $('.checkbox-group .parents-checkbox .panel-select-all :checkbox').change(function () {
			        $(this).closest('.checkbox-group').find(':checkbox').not(this).prop('checked', this.checked).closest('label');
			    });

			    $('.child-checkbox :checkbox').change(function () {
			        var $group = $(this).closest('.checkbox-group');
			        $group.find('.parents-checkbox .panel-select-all :checkbox').prop('checked', !$group.find('.child-checkbox :checkbox:not(:checked)').length);
			    });
			// /Select All/None

			// DateRangePicker
			var daterange = getParameterByName("daterange");
		    if (daterange == null){
		      var start = moment().subtract(365, 'days');
		      var end = moment();
		    } else {
		      var dateVar = daterange.split(',');
		      var start = moment(new Date(dateVar[0].substr(0, 4), parseInt(dateVar[0].substr(5, 2))-1, dateVar[0].substr(8, 2)));
		      var end = moment(new Date(dateVar[1].substr(0, 4), parseInt(dateVar[1].substr(5, 2))-1, dateVar[1].substr(8, 2)));;
		    }

		    function cb(start, end) {
		        $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
		    }

		    $('#reportrange').daterangepicker({
		        startDate: start,
		        endDate: end,
		        ranges: {
		           '{% trans 'Today' %}': [moment(), moment()],
		           '{% trans 'Yesterday' %}': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
		           '{% trans 'Last 7 Days' %}': [moment().subtract(6, 'days'), moment()],
		           '{% trans 'Last 30 Days' %}': [moment().subtract(29, 'days'), moment()],
		           '{% trans 'This Month' %}': [moment().startOf('month'), moment().endOf('month')],
		           '{% trans 'Last Month' %}': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
		           '{% trans 'Last Year' %}': [moment().subtract(365, 'days'), moment()]
		        }
		    }, cb);

		    cb(start, end);

			$('#reportrange').on('apply.daterangepicker', function(ev, picker) {
			    var url = $(location).attr("href");
			    if (daterange == null){
			      window.document.location = url+'&daterange='+picker.startDate.format('YYYY-MM-DD')+','+picker.endDate.format('YYYY-MM-DD');
			    }  else {
			      // url = url.replace(/(daterange=).*?(&)/,'$1' + picker.startDate.format('YYYY-MM-DD')+','+picker.endDate.format('YYYY-MM-DD') + '$2');
			      url = updateUrlParameter(url, 'daterange', picker.startDate.format('YYYY-MM-DD')+','+picker.endDate.format('YYYY-MM-DD'))

			      window.document.location = url;
			    }
			});
			// /DateRangePicker

			$( "form.form-inline" ).submit(function( event ) {
			  event.preventDefault();
			});

			$('button.ply-trget').on('click', function(event) {
				console.log("click");

				var type_selected_param = '';
				var target_selected_param = '';

				var type_unselected = $("input[name='main_type_select[]']:checkbox:not(:checked)");
				var type_selected = $("input[name='main_type_select[]']:checkbox:checked");

				var target_unselected = $("input[name='main_target_select[]']:checkbox:not(:checked)");
				var target_selected = $("input[name='main_target_select[]']:checkbox:checked");

				// var type_unselected = $("#indicatorTarget :checkbox:not(:checked)");
				// var type_selected = $("#indicatorTarget :checkbox:checked");

				// var target_unselected = $("#indicatorType :checkbox:not(:checked)");
				// var target_selected = $("#indicatorType :checkbox:checked");

				if (type_unselected.length > 0) {
					// var type_array = type_selected.val();
					var type_array = [];
					type_selected.each( function () {
					   type_array.push($(this).val());
					});
					type_selected_param += type_array;
				}


				if (target_unselected.length > 0) {
					// var target_array = $('#incidentTarget-select').val();
					var target_array = [];
					target_selected.each( function () {
					   target_array.push($(this).val());
					});
					target_selected_param += target_array
				}

				if (type_selected.length == 0) {
					type_selected_param = 'noselection';
				}

				if (target_selected.length == 0) {
					target_selected_param = 'noselection';
				}

				var url = $(location).attr("href");

				if (type_selected_param != ''){
					if (getParameterByName("incident_type") == null){
						url += '&incident_type='+type_selected_param;
					} else {
						url = updateUrlParameter(url, 'incident_type', type_selected_param);
					}

				} else {
					url = removeParam('incident_type', url);
				}

				if (target_selected_param != ''){
					if (getParameterByName("incident_target") == null){
						url += '&incident_target='+target_selected_param;
					} else {
						url = updateUrlParameter(url, 'incident_target', target_selected_param)
					}

				} else {
					url = removeParam('incident_target', url);
				}

				window.document.location = url;
			});
		});
	</script>
